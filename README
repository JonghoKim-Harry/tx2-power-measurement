JETSON TX2 POWER MEASUREMENT
============


OBJECTIVE

   To measure Jetson TX2 power consumption


HOW TO BUILD and SELFTEST

    make                Build from source codes

    make check          Selftest with CIFAR-10 and MNIST dataset
                        Note that you should set variable CAFFE_HOME
                        in Makefile

    make debug          Build debug version binary and then do selftest with
                        CIFAR-10 and MNIST dataset. It will print more
                        messeages. Note that you should set variable CAFFE_HOME
                        in Makefile


HOW TO USE

    -h                  Print help message

    -c <component>      A component whose power consumption will be measured
                         * Supported components: all, cpu, gpu, ddr, wifi, soc

    -f <file name>      Path to statistics file. It will truncate content of
                        the old file and create new one


REFERENCE

   https://github.com/horizon-research/tx2-power-consumption.git


DESIGN PRINCIPLE

   In order to minimize measurement overhead, I used a lot of system calls.

      * time()
      * clock_gettime()
      * nanosleep()
      * access()
      * open()
      * lseek()
      * read()
      * write()
      * close()
      * fork()
      * waitpid()
      * exit()


SCRIPT USAGE EXAMPLE

   # Set GPU frequency to be fixed to 1122000000Hz (1.122GHz)
   sudo ./script/fix_gpu_freq 1122000000

   # Run experiments with all available GPU frequencies as fixed frequency
   # and default governor setup with CIFAR-10 dataset
   sudo bash script/iterate_gpu_freq.sh cifar-10 script/run_cifar10.sh

   # Run experiments with all available GPU frequencies as fixed frequency
   # and default governor setup with MNIST dataset
   sudo bash script/iterate_gpu_freq.sh mnist script/run_mnist.sh

   # Draw GPU power and frequency plot
   gnuplot -c script/gpu-power-frequency.plot \
              test_result/cifar-10/cifar-10_gpu_1122000000Hz.txt \
              test_result/cifar-10/cifar-10_gpu_1122000000Hz.png \
              cifar-10

   # Draw GPU power and frequency plot for all .txt file in directory
   ./script/draw_all_gpu-power-frequency_plot.sh test_result/cifar-10/ cifar-10

   # Draw CPU and GPU power and frequency plot
   gnuplot -c script/cpu-gpu-power.plot \
              test_result/mnist/mnist_gpu_1122000000Hz.txt \
              test_result/mnist/mnist_cpu_gpu_1122000000Hz.png \
              mnist
